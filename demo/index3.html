<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>扫码</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<style type="text/css">
			#bcid{
				height: 400px;
				width: 100%;
			}
		</style>
	</head>
	
	<body>
		<button type="button" class="mui-btn mui-btn-blue mui-btn-block" id="btn">扫一扫</button>
		<button type="button" class="mui-btn mui-btn-blue mui-btn-block" id="pick">从相册中选取图片</button>
		<div id="bcid"></div>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
			//http://www.html5plus.org/doc/zh_cn/barcode.html
			var btn = document.getElementById('btn');
			var pick = document.getElementById('pick');
			btn.addEventListener('tap',function(){
				var bc = new plus.barcode.Barcode('bcid');
				bc.start()
				bc.onmarked = function(type,code,file){
					
				}
				bc.onerror = function(err){
					
				}
			})
			pick.addEventListener('tap',function(){
				plus.gallery.pick(function(filepath){
					plus.barcode.scan(filepath,function(type,code){
						// type  扫码类型
						// code  扫码返回值
					})
				})
			})
		</script>
	</body>

</html>